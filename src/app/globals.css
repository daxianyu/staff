@import "tailwindcss";

:root {
  --header-bg: #1e3965;
  --header-text: #fff;
  --sidebar-bg: #1e3965;
  /* linear-gradient(180deg, #4a90e2, #357abd); */
  --sidebar-text: #fff;

  /* 按钮主题变量 */
  --button-primary-bg: #1e3965;
  --button-primary-text: #ffffff;
  --button-primary-hover: #2a4a75;

  /* 安全区域变量 - 默认 0px 以确保在不支持 env() 的旧机型上正常显示 */
  --safe-area-top: env(safe-area-inset-top, 0px);
  --safe-area-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-left: env(safe-area-inset-left, 0px);
  --safe-area-right: env(safe-area-inset-right, 0px);
}

/* 基础样式优化 */
html {
  box-sizing: border-box;
  /* 防止移动端字体自动缩放 */
  -webkit-text-size-adjust: 100%;
  /* 移除移动端点击高亮蓝框 */
  -webkit-tap-highlight-color: transparent;
}

*,
*:before,
*:after {
  box-sizing: inherit;
}

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.5;
  /* 优化滚动 */
  -webkit-overflow-scrolling: touch;
}

/* 小程序环境自适应隐藏规则 */
/* 使用类选择器而不是 JSX 条件渲染，避免样式突跳和构建错误 */
.is-miniprogram .mp-hide {
  display: none !important;
}

/* 小程序环境下内容区域占满全屏 */
.is-miniprogram .mp-full-height {
  height: 100vh !important;
  height: 100dvh !important;
}

/* 移动端安全区域适配辅助类 */
.pb-safe {
  padding-bottom: var(--safe-area-bottom);
}

.pt-safe {
  padding-top: var(--safe-area-top);
}

.pl-safe {
  padding-left: var(--safe-area-left);
}

.pr-safe {
  padding-right: var(--safe-area-right);
}

.min-h-screen-safe {
  min-height: calc(100vh - var(--safe-area-top) - var(--safe-area-bottom));
}

/* 兼容性修复：旧版 Flexbox 溢出问题 */
.flex-1-safe {
  flex: 1 1 0%;
  min-height: 0;
}

/* 统一的主要操作按钮样式 - 使用主题颜色 */
.btn-primary {
  background-color: var(--button-primary-bg) !important;
  color: var(--button-primary-text) !important;
  border: none !important;
  transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out !important;
  font-weight: 500;
}

.btn-primary:hover:not(:disabled) {
  background-color: var(--button-primary-hover) !important;
}

.btn-primary:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

.btn-primary:focus {
  outline: 2px solid var(--button-primary-bg) !important;
  outline-offset: 2px !important;
}

/* Tailwind 工具类 - 主要操作按钮（使用主题颜色） */
.bg-primary {
  background-color: var(--button-primary-bg) !important;
}

.text-primary {
  color: var(--button-primary-text) !important;
}

.hover\:bg-primary-hover:hover {
  background-color: var(--button-primary-hover) !important;
}

/* 覆盖 Tailwind 的蓝色按钮类，让它们使用主题颜色 */
/* 针对按钮和链接元素，让 bg-blue-600 等类使用 CSS 变量 */
button.bg-blue-600,
button.bg-blue-500,
button.bg-blue-700,
a.bg-blue-600,
a.bg-blue-500,
a.bg-blue-700,
[role="button"].bg-blue-600,
[role="button"].bg-blue-500,
[role="button"].bg-blue-700 {
  background-color: var(--button-primary-bg) !important;
  color: var(--button-primary-text) !important;
}

button.bg-blue-600:hover:not(:disabled),
button.bg-blue-500:hover:not(:disabled),
button.bg-blue-700:hover:not(:disabled),
a.bg-blue-600:hover:not(:disabled),
a.bg-blue-500:hover:not(:disabled),
a.bg-blue-700:hover:not(:disabled),
[role="button"].bg-blue-600:hover:not(:disabled),
[role="button"].bg-blue-500:hover:not(:disabled),
[role="button"].bg-blue-700:hover:not(:disabled) {
  background-color: var(--button-primary-hover) !important;
}

/* 覆盖 hover:bg-blue-700 等 hover 类 */
button.hover\:bg-blue-700:hover:not(:disabled),
button.hover\:bg-blue-600:hover:not(:disabled),
a.hover\:bg-blue-700:hover:not(:disabled),
a.hover\:bg-blue-600:hover:not(:disabled),
[role="button"].hover\:bg-blue-700:hover:not(:disabled),
[role="button"].hover\:bg-blue-600:hover:not(:disabled) {
  background-color: var(--button-primary-hover) !important;
}

/* 覆盖 border-blue-600 等边框颜色 */
button.border-blue-600,
button.border-blue-500,
button.border-blue-700,
a.border-blue-600,
a.border-blue-500,
a.border-blue-700,
[role="button"].border-blue-600,
[role="button"].border-blue-500,
[role="button"].border-blue-700 {
  border-color: var(--button-primary-bg) !important;
}

/* 注意：不覆盖 text-blue-600，因为 tab 按钮等非 primary 按钮需要使用蓝色文字 */
/* 真正的 primary 按钮应该使用 text-white，而不是 text-blue-600 */

/* 覆盖 focus:ring-blue-500 等 focus 环颜色 */
button.focus\:ring-blue-500:focus,
a.focus\:ring-blue-500:focus,
[role="button"].focus\:ring-blue-500:focus {
  --tw-ring-color: var(--button-primary-bg) !important;
}

/* 覆盖包含 text-white 的蓝色按钮（常见组合） */
button.bg-blue-600.text-white,
button.bg-blue-500.text-white,
button.bg-blue-700.text-white,
a.bg-blue-600.text-white,
a.bg-blue-500.text-white,
a.bg-blue-700.text-white {
  color: var(--button-primary-text) !important;
}
