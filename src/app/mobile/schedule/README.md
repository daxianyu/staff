# 手机端日程页面

## 概述

这是一个专为手机端优化的日程安排页面，提供直观的触摸交互体验。

## 功能特性

### 📱 移动端优化
- **纯日视图**: 专为手机屏幕优化，只显示日视图
- **触摸友好**: 优化的触摸目标大小和手势交互
- **响应式设计**: 适配各种手机屏幕尺寸
- **安全区域**: 支持刘海屏和底部指示器

### 📅 日程功能
- **时间段选择**: 点击时间段快速创建事件
- **时间冲突检测**: 自动检测与不可用时间段的冲突
- **事件类型**: 支持课程和不可用时段两种类型
- **灵活时间**: 支持15分钟间隔的时间选择

### 🎛️ 交互体验
- **下拉关闭**: 在模态框顶部下拉即可关闭
- **触摸反馈**: 按钮和交互元素提供视觉反馈
- **自动聚焦**: 打开添加界面时自动聚焦标题输入框
- **背景锁定**: 模态框打开时防止背景滚动

## 页面结构

```
/mobile/schedule/
├── page.tsx                    # 主页面组件
├── mobile-schedule.css         # 手机端样式
├── components/
│   └── MobileAddEventModal.tsx # 手机端模态框
└── README.md                   # 说明文档
```

## 使用方式

### 访问页面
```
/mobile/schedule
```

### 添加事件
1. 点击顶部的"添加"按钮
2. 或者直接点击日历中的时间段
3. 在弹出的模态框中填写信息
4. 点击"保存"完成添加

### 查看事件
- 点击日历中的事件查看详情
- 蓝色块表示课程
- 灰色块表示不可用事件

### 日期导航
- 使用左右箭头切换日期
- 点击"今天"快速回到当前日期

## 样式定制

### 主要CSS类
- `.touch-manipulation`: 触摸优化
- `.unavailable-time-slot`: 不可用时间段样式
- `.safe-area-bottom`: 安全区域适配

### 颜色方案
- 课程: 蓝色 (`#3b82f6`)
- 不可用: 灰色 (`#6b7280`)
- 选中: 粉红色 (`#d81b60`)

## 技术特性

### 触摸手势
- **下拉关闭**: 模态框支持下拉手势关闭
- **触摸反馈**: 按钮提供scale动画反馈
- **防误触**: 禁用长按选择，保护交互体验

### 性能优化
- **动画优化**: 使用transform进行硬件加速
- **事件防抖**: 合理的事件处理避免性能问题
- **内存管理**: 组件卸载时清理事件监听器

### 兼容性
- **iOS Safari**: 特殊的视口高度处理
- **Android Chrome**: 标准触摸事件支持
- **刘海屏**: 安全区域自动适配

## 开发说明

### 依赖组件
- `TimePicker`: 时间选择器
- `Button`: 按钮组件
- `react-big-calendar`: 日历核心

### 主要Hook
- `useState`: 状态管理
- `useEffect`: 生命周期管理
- `useCallback`: 性能优化
- `useRef`: DOM引用

### 数据格式
```typescript
interface ScheduleEvent {
  id: string;
  title: string;
  start: Date;
  end: Date;
  teacherId: string;
  teacherName: string;
  type: 'lesson' | 'unavailable';
  description?: string;
}
```

## 注意事项

1. **时间范围**: 默认支持9:00-22:00时间段
2. **最小间隔**: 15分钟为最小时间间隔
3. **冲突检测**: 自动检测与不可用时间段的重合
4. **表单验证**: 标题为必填项
5. **状态清理**: 模态框关闭时自动重置表单

## 未来扩展

- [ ] 支持左右滑动切换日期
- [ ] 添加事件详情查看页面
- [ ] 支持事件编辑和删除
- [ ] 添加更多事件类型
- [ ] 集成推送通知 