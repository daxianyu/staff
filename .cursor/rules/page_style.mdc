---
description: 新页面建立的样式和功能规范
globs:
alwaysApply: true
---

# 新页面建立规范

## 基础结构
- 导入：`useState`, `useEffect`, `useAuth`, `PERMISSIONS`, Heroicons图标
- 权限检查：`canView`, `canEdit`, `canDelete`
- 状态管理：`items`, `loading`, `searchTerm`, 模态框状态, `formData`

## 权限检查页面
无权限时显示：居中布局，红色警告图标，权限不足提示
- 容器：`min-h-screen bg-gray-50 flex items-center justify-center`
- 图标：`h-12 w-12 text-red-500`

## 页面布局
### 页面容器
- 外层：`min-h-screen bg-gray-50`
- 内层：`max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8`

### 搜索和操作栏
- 容器：`bg-white rounded-lg shadow mb-6 p-6`
- 布局：`flex flex-col sm:flex-row gap-4 items-center justify-between`
- 搜索框：带放大镜图标，`pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500`
- 新增按钮：`bg-blue-600 text-white rounded-lg hover:bg-blue-700`

### 数据表格
- 容器：`bg-white rounded-lg shadow overflow-hidden`
- 加载状态：居中，旋转动画 `animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600`
- 表格：`min-w-full divide-y divide-gray-200`
- 表头：`bg-gray-50`
- 行悬停：`hover:bg-gray-50 transition-colors`
- 操作按钮：圆形，`w-8 h-8 rounded-full`，编辑蓝色，删除红色

## 模态框
### 新增/编辑模态框
- 遮罩：`fixed inset-0 bg-black/50`
- 容器：`bg-white rounded-lg shadow-xl`
- 关闭按钮：右上角，`XMarkIcon`
- 表单：`space-y-4`
- 输入框：`w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500`
- 按钮：取消灰色，确认蓝色

### 删除确认模态框
- 布局：`sm:flex sm:items-start`
- 图标：红色圆形背景 `bg-red-100`
- 按钮：删除红色，取消白色

## 分页组件

### 前端分页实现（推荐）
#### 分页状态管理
- **基础状态**: `currentPage` (当前页), `pageSize` (每页数量)
- **计算属性**: `totalItems` (总记录数), `totalPages` (总页数), `paginatedItems` (当前页数据)
- **数据切片**: 使用 `slice(startIndex, endIndex)` 进行前端分页

#### 分页处理函数
- **页面切换**: `handlePageChange(page)` - 直接更新当前页
- **每页数量**: `handlePageSizeChange(size)` - 更新每页数量并重置到第一页
- **搜索重置**: 搜索条件改变时自动回到第一页

#### 分页UI组件结构
- **容器**: `bg-white rounded-lg shadow-sm border border-gray-200 p-4 mt-6`
- **布局**: `flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4`
- **信息显示**: 左侧显示 "显示第 X - Y 条，共 Z 条记录"
- **控制区域**: 右侧包含每页选择器和分页按钮组

#### 每页显示数量选择器
- **位置**: 分页按钮组最前面
- **样式**: `px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500`
- **选项**: 5, 10, 20, 50 条每页

#### 分页按钮组
- **上一页按钮**: `px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50`
- **页码按钮**: `w-8 h-8 flex items-center justify-center text-sm font-medium border rounded`
- **当前页样式**: `bg-blue-600 border-blue-600 text-white`
- **普通页样式**: `bg-white border-gray-300 text-gray-700 hover:bg-gray-50`
- **下一页按钮**: 同上一页按钮样式

#### 智能页码显示逻辑
- **显示规则**: 最多显示7个页码按钮
- **≤7页**: 显示所有页码
- **>7页**: 显示第一页 + ... + 当前页附近 + ... + 最后一页
- **省略号**: `w-8 h-8 flex items-center justify-center text-sm text-gray-400`

### 后端分页实现（可选）
#### 分页状态管理
- **额外状态**: `totalItems`, `totalPages` 从后端获取
- **异步加载**: 每次分页都需要调用API

#### 分页处理函数
- **页面切换**: 异步调用 `loadData(page, search, showDisabled)`
- **每页数量**: 异步调用 `loadData(1, search, showDisabled, newPageSize)`

#### 分页数据加载
- **参数传递**: page, page_size, search, show_disable
- **API调用**: 根据参数获取对应页面的数据

### 分页组件特性
- **前端分页**: 适合数据量较小的场景，响应快速
- **后端分页**: 适合数据量大的场景，减少网络传输
- **智能页码**: 最多显示7个页码，自动显示省略号
- **每页选择**: 支持5/10/20/50条每页显示
- **响应式**: 移动端和桌面端都有良好体验
- **搜索重置**: 搜索条件改变时自动回到第一页

## 必须遵循的规则
1. **权限检查**: 每个页面都必须有权限检查
2. **响应式设计**: 所有页面必须兼容手机端
3. **模态框遮罩**: 使用 `bg-black/50`
4. **加载状态**: 数据加载时显示加载动画
5. **错误处理**: 统一的错误提示和处理
6. **类型安全**: 所有组件使用TypeScript
7. **图标使用**: 统一使用Heroicons图标库
8. **分页实现**: 使用统一的分页组件和状态管理

涉及到删除，enable disable 等操作都需要二次弹窗确认


你还可以使用chrome-devtools-mcp 这个工具来查看网页是否有问题，
可以打开 http://localhost:3000
检查PC端以及手机端（iPhone）样式是否有问题